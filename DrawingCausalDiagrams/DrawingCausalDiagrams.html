<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Drawing causal diagrams</title>
    <meta charset="utf-8" />
    <meta name="author" content="Christoph Hanck" />
    <script src="DrawingCausalDiagrams_files/header-attrs/header-attrs.js"></script>
    <link href="DrawingCausalDiagrams_files/remark-css/default.css" rel="stylesheet" />
    <script src="DrawingCausalDiagrams_files/xaringanExtra-progressBar/progress-bar.js"></script>
    <script src="DrawingCausalDiagrams_files/clipboard/clipboard.min.js"></script>
    <link href="DrawingCausalDiagrams_files/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="DrawingCausalDiagrams_files/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-clipboard\"><\/i>","success":"<i class=\"fa fa-check\" style=\"color: #00ff00\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
    <link href="DrawingCausalDiagrams_files/font-awesome/css/all.min.css" rel="stylesheet" />
    <link href="DrawingCausalDiagrams_files/font-awesome/css/v4-shims.min.css" rel="stylesheet" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } },
      });
    </script>
    <style>
    .mjx-mrow a {
      color: black;
      pointer-events: none;
      cursor: default;
    }
    </style>
    <link rel="stylesheet" href="../assets/ude_fonts.css" type="text/css" />
    <link rel="stylesheet" href="../assets/ude.css" type="text/css" />
    <link rel="stylesheet" href="../assets/custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# <a href='https://github.com/mca91/kausalanalyse_slides/raw/main/DrawingCausalDiagrams/DrawingCausalDiagrams.pdf'>Drawing causal diagrams</a>
]
.author[
### Christoph Hanck
]
.date[
### Summer 2023
]

---




<style>.xe__progress-bar__container {
  bottom:0;
  opacity: 1;
  position:absolute;
  right:0;
  left: 0;
}
.xe__progress-bar {
  height: 0.25em;
  background-color: #004c93;
  width: calc(var(--slide-current) / var(--slide-total) * 100%);
}
.remark-visible .xe__progress-bar {
  animation: xe__progress-bar__wipe 200ms forwards;
  animation-timing-function: cubic-bezier(.86,0,.07,1);
}
@keyframes xe__progress-bar__wipe {
  0% { width: calc(var(--slide-previous) / var(--slide-total) * 100%); }
  100% { width: calc(var(--slide-current) / var(--slide-total) * 100%); }
}</style>



## Recap of causal diagrams

Causal diagrams are representations of the DGP that got us our data. Causal diagrams help us in answering research questions.

Drawing our own causal diagram will come down to putting our idea of what the DGP is onto paper (or a computer screen).

&lt;div class="figure"&gt;
&lt;img src="DrawingCausalDiagrams_files/figure-html/unnamed-chunk-1-1.png" alt="1: A simple causal diagram" width="70%" style="color:black; display:block; margin-right:auto; margin-left:auto;" /&gt;
&lt;p class="caption"&gt;1: A simple causal diagram&lt;/p&gt;
&lt;/div&gt;

---
## Causal diagrams
**Assumptions for causal diagrams**

- Assumptions about the DPG are very important for causal diagrams.
- The quality of our research will hinge on how accurate those assumptions are. 
- Think about whether our assumptions are reasonable, try to base them as much on well-established knowledge and prior research as possible. 
- If we think that there is reason to be skeptical of assumption, we should ask ourselves what evidence would support the assumption and try to provide that evidence.

---
## How to get from DGP to causal diagram?
**General steps**

1. Make a list of all relevant variables.
  - A variable on a causal diagram is a measurement we could take that could result in different values.
  - Every variable that 
    
      ...causes the treatment or outcome or
      
      ...causes something that causes something that causes the treatment or outcome or 
      
      ...causes something that causes something that causes something
  
      is a good candidate for inclusion ðŸ™‚.
  
2. Filter the variables to the ones that are (strongly) causing the outcome.

---
## How to get from DGP to causal diagram?
**General steps**

&lt;ol start=3&gt;
&lt;li&gt;Categorise the variables into &lt;b&gt;treatment variables&lt;/b&gt; and &lt;b&gt;outcome variables&lt;/b&gt;
    
    &lt;p&gt;Think about how those variables might cause each other, or perhaps be caused by the treatment or outcome&lt;/p&gt;

    &lt;p&gt;We might also want to consider whether any of the variables are related but neither causes the other, in which case they must have some sort of (unobserved) common cause we can include&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Add the non-treatment and non-control variables.&lt;/li&gt;
    
&lt;li&gt;Create the causal diagram and carefully revise. Is an important variable missing?&lt;/li&gt;

&lt;/ol&gt;


---
## Reducing the complexity of causal diagrams

We can identify and reduce needless complexity with some few simple tests:

- **Unimportance**: Weâ€™ve already discussed this one&amp;mdash;if the arrows coming in and out of a variable are likely to be tiny and unimportant effects, we can probably remove the variable.
- **Redundancy**: If there are any variables on the diagram that occupy the same space - that is, they have the arrows coming in and going out of them from/to the same variables - we can probably combine them and describe them together.
- **Mediators**: If one variable is only on the graph as a way for one variable to affect another, e.g. `\(B\)` in `$$A\to B\to C$$` where nothing else connects to `\(B\)`, then we can probably remove it and just have `\(A\to C\)` directly.
- **Irrelevance**: Some variables which are an important part of the DGP but irrelevant to the research question at hand can be neglected.

---
## Drawing causal diagrams

.vcenter[
.blockquote[

### Example: Online classes

Potential causes for people to take online classes (*classes*):

- The preferences (*prefs*) of student might be driven by background factors like *race*, *gender*, *age*, and socioeconomic status (*SES*)
- Those same background factors might influence how much available time (*time*) students have
- *Time* might be influenced by how many work hours (*work*) a student is doing
- Causes for people to drop out of community college (*DropOut*) may be *race*, *gender*, *SES*, *work*, and previous performance in academics (*academics*)

]]

---
## Drawing causal diagrams

.vcenter[
.blockquote[

### Example: Online classes

Think about which variables cause which others.

- *classes* `\(\to\)` *DropOut*, *prefs* `\(\to\)` *classes*, *race* `\(\to\)` *DropOut*, *gender* `\(\to\)` *DropOut*, *gender* `\(\to\)` *DropOut*, *WebAccess* `\(\to\)` *classes*, and so on.

- If variables are related to each other without there necessarily being a clear causal arrow in either direction, we add on common (unobserved) causes we just call U1, U2, etc.

]]

---
## Drawing causal diagrams

.blockquote[
### Example: Online classes

The causal diagram becomes messy.

&lt;div class="figure"&gt;
&lt;img src="DrawingCausalDiagrams_files/figure-html/unnamed-chunk-2-1.png" alt="2: Online classes" style="color:black; display:block; margin-right:auto; margin-left:auto; margin-top:15px" /&gt;
&lt;p class="caption"&gt;2: Online classes&lt;/p&gt;
&lt;/div&gt;

]


---
## Drawing causal diagrams

.vcenter[
.blockquote[
### Example: Online classes

Simplification of the Causal diagram:

- *gender* and *race* have the exact same set of arrows coming in and going out. So we can combine those in to one, which we can call d*emographics*.
- Instead of having *gender*, *race*, *SES*, and *age* affect *prefs* and then have *prefs* affect *classes*, we can just have those variables affect *classes* directly as mediators
- We omit *webAccess* using the same logic
- Other variables besides *hours* that cause *time* also cause *hours*. We omit *time* to have *hours* affect *classes* directly: we still have all those same *time* causes affecting *hours*. 

]]

---
## Drawing causal diagrams

.blockquote[
### Example: Online classes

After Simplification, the causal diagram looks like:


&lt;div class="figure"&gt;
&lt;img src="DrawingCausalDiagrams_files/figure-html/unnamed-chunk-3-1.png" alt="3: Simplified causal diagram for online classes" style="color:black; display:block; margin-right:auto; margin-left:auto; margin-top:15px" /&gt;
&lt;p class="caption"&gt;3: Simplified causal diagram for online classes&lt;/p&gt;
&lt;/div&gt;

]

---
## Drawing causal diagrams
**Avoiding cycles**

- A causal diagram cannot have a cycles. 
- A cycle depicts that a variable causes itself&amp;mdash;we cannot isolate the cause from effect.
- In the true DGP there cannot be any cycles either.
- Whenever we have a cycle in our diagram, we can get out of it by adding a **time dimension**.
- Cycles can also be broken using a source of random variation for one of the variables in the cycle:

    If we just focus on the part of the variable driven by randomness, the effect cannot loop back on itself! 
 
---
## Drawing causal diagrams 
**Avoiding cycles**

.vcenter[
.blockquote[
### Example: Cycles in a causal diagram

&lt;br&gt;

.pull-left[

&lt;div class="figure"&gt;
&lt;img src="DrawingCausalDiagrams_files/figure-html/unnamed-chunk-4-1.png" alt="4: A simple loop in a causal diagram" width="100%" /&gt;
&lt;p class="caption"&gt;4: A simple loop in a causal diagram&lt;/p&gt;
&lt;/div&gt;
 ]

.pull-right[

&lt;div class="figure"&gt;
&lt;img src="DrawingCausalDiagrams_files/figure-html/unnamed-chunk-5-1.png" alt="5: Another representation of the loop" width="100%" /&gt;
&lt;p class="caption"&gt;5: Another representation of the loop&lt;/p&gt;
&lt;/div&gt;
]]]
 
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="../assets/remark-zoom.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"navigation": {
"scroll": false
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
